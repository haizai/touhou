!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="/public/",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var s=i(1),a=n(s),o=i(2),r=n(o),l=i(7),u=n(l),h=function(t,e){},c={ball:"img/ball.png",pl00_01:"img/pl00/pl00_01.png",pl00_02:"img/pl00/pl00_02.png",pl00_03:"img/pl00/pl00_03.png",pl00_04:"img/pl00/pl00_04.png",pl00_05:"img/pl00/pl00_05.png",pl00_06:"img/pl00/pl00_06.png",pl00_07:"img/pl00/pl00_07.png",pl00_08:"img/pl00/pl00_08.png",pl00_09:"img/pl00/pl00_09.png",pl00_10:"img/pl00/pl00_10.png",pl00_11:"img/pl00/pl00_11.png",pl00_12:"img/pl00/pl00_12.png",pl00_13:"img/pl00/pl00_13.png",pl00_14:"img/pl00/pl00_14.png",pl00_15:"img/pl00/pl00_15.png",pl00_16:"img/pl00/pl00_16.png",pl00_17:"img/pl00/pl00_17.png",pl00_18:"img/pl00/pl00_18.png",pl00_19:"img/pl00/pl00_19.png",pl00_20:"img/pl00/pl00_20.png",pl00_21:"img/pl00/pl00_21.png",pl00_22:"img/pl00/pl00_22.png",pl00_23:"img/pl00/pl00_23.png",pl00_24:"img/pl00/pl00_24.png"},f=a.default.instance(30,u.default,c,function(t){var e=new r.default(t);t.runWithScene(e)});h(f,!0),console.log(f)},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e,n,s,a){var o=this;i(this,t),window.fps=e,this.config=n,this.images=s,this.textures={},this.runCallback=a,this.scene=null,this.actions={},this.endActions={},this.startActions={},this.keydowns={},this.canvas=document.querySelector("#id-canvas"),this.context=this.canvas.getContext("2d"),window.addEventListener("keydown",function(t){o.keydowns[t.keyCode]=!0,o.startActions[t.keyCode]&&o.startActions[t.keyCode].allow&&(o.startActions[t.keyCode].cb(),o.startActions[t.keyCode].allow=!1)}),window.addEventListener("keyup",function(t){o.keydowns[t.keyCode]=!1,o.endActions[t.keyCode]&&(o.endActions[t.keyCode](),o.startActions[t.keyCode]&&(o.startActions[t.keyCode].allow=!0))}),this.init()}return n(t,[{key:"drawImage",value:function(t){var e=this.textures[t.name];this.context.drawImage(e,t.x-t.w/2,t.y-t.h/2)}},{key:"registerAction",value:function(t,e,i,n){e&&(this.actions[t]=e),i&&(this.startActions[t]={cb:i,allow:!0}),n&&(this.endActions[t]=n)}},{key:"__start",value:function(){this.runCallback(this)}},{key:"runWithScene",value:function(t){var e=this;this.scene=t,setTimeout(function(){e.runloop()},1e3/window.fps)}},{key:"runloop",value:function(){for(var t=this,e=Object.keys(this.actions),i=0;i<e.length;i++){var n=e[i];this.keydowns[n]&&this.actions[n]()}this.update(),this.context.clearRect(0,0,this.canvas.width,this.canvas.heithisht),this.draw(),setTimeout(function(){t.runloop()},1e3/window.fps)}},{key:"update",value:function(){this.scene.update()}},{key:"draw",value:function(){this.scene.draw()}},{key:"init",value:function(){for(var t=this,e=0,i=Object.keys(t.images),n=function(){var n=i[s];a=t.images[n];var o=new Image;o.src=a,o.onload=function(){t.textures[n]=o,e++,console.log("load images",e,i.length),e==i.length&&(console.log("load images",t.images),t.__start())}},s=0;s<i.length;s++){var a;n()}}}],[{key:"instance",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.i=this.i||new(Function.prototype.bind.apply(this,[null].concat(e))),this.i}}]),t}();e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(3),r=n(o),l=function(){function t(e){s(this,t),this.game=e,this.eles=[];var i=new r.default(this.game);this.addEle(i),this.game.registerAction("37",function(){return i.onDirection("l")},null,function(){return i.offDirection("l")}),this.game.registerAction("39",function(){return i.onDirection("r")},null,function(){return i.offDirection("r")}),this.game.registerAction("38",function(){return i.onDirection("t")},null,function(){return i.offDirection("t")}),this.game.registerAction("40",function(){return i.onDirection("b")},null,function(){return i.offDirection("b")})}return a(t,[{key:"addEle",value:function(t){this.eles.push(t)}},{key:"drawEles",value:function(){var t=this;this.eles.forEach(function(e){t.game.drawImage(e)})}},{key:"draw",value:function(){this.game.context.fillStyle="#554",this.game.context.fillRect(0,0,this.game.config.width,this.game.config.height),this.drawEles()}},{key:"update",value:function(){window.paused||this.eles.forEach(function(t){t.anime&&t.anime.update(),t.update&&t.update()})}}]),t}();e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(4),u=n(l),h=i(5),c=(n(h),i(6)),f=n(c),p=function(t){function e(t){s(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"pl00_01"));return i.x=200,i.y=500,i.speed=6,i.l=!1,i.r=!1,i.t=!1,i.b=!1,i.lf=null,i.tb=null,i.moveStage="stay",i.anime=new f.default(i,["pl00_01","pl00_02","pl00_03","pl00_04","pl00_05","pl00_06","pl00_07","pl00_08"],["pl00_09","pl00_10","pl00_11","pl00_12"],["pl00_13","pl00_14","pl00_15","pl00_16"],["pl00_17","pl00_18","pl00_19","pl00_20"],["pl00_21","pl00_22","pl00_23","pl00_24"]),i}return o(e,t),r(e,[{key:"move",value:function(t){switch(t){case"l":this.moveLeft();break;case"r":this.moveRight();break;case"t":this.moveTop();break;case"b":this.moveBottom()}}},{key:"moveLeft",value:function(){this.anime.moveLeft(),this.x>this.speed+this.w/2?this.x-=this.speed:this.x=this.w/2}},{key:"moveRight",value:function(){this.anime.moveRight(),this.x<this.game.config.width-this.w/2-this.speed?this.x+=this.speed:this.x=this.game.config.width-this.w/2}},{key:"moveTop",value:function(){this.y>this.speed+this.h/2?this.y-=this.speed:this.y=this.h/2}},{key:"moveBottom",value:function(){this.y<this.game.config.height-this.h/2-this.speed?this.y+=this.speed:this.y=this.game.config.height-this.h/2}},{key:"stay",value:function(){this.anime.stay()}},{key:"stayLeft",value:function(){this.anime.stay()}},{key:"stayRight",value:function(){this.anime.stay()}},{key:"onDirection",value:function(t){switch(t){case"l":!this.l&&this.r&&(this.lr="l"),this.l=!0;break;case"r":!this.r&&this.l&&(this.lr="r"),this.r=!0;break;case"t":!this.t&&this.b&&(this.tb="t"),this.t=!0;break;case"b":!this.b&&this.t&&(this.tb="b"),this.b=!0}}},{key:"offDirection",value:function(t){switch(t){case"l":this.l=!1,this.lr=null;break;case"r":this.r=!1,this.lr=null;break;case"t":this.t=!1,this.tb=null;break;case"b":this.b=!1,this.tb=null}}},{key:"update",value:function(){this.lr?this.move(this.lr):this.l?this.move("l"):this.r?this.move("r"):this.anime.stay(),this.tb?this.move(this.tb):this.t?this.move("t"):this.b&&this.move("b")}},{key:"startMoveLeft",value:function(){console.log("start left")}},{key:"startMoveRight",value:function(){console.log("start right")}},{key:"startMoveTop",value:function(){}},{key:"startMoveBottom",value:function(){}}]),e}(u.default);e.default=p},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function t(e,n){i(this,t),this.game=e,this.name=n,this.texture=e.textures[n],this.w=this.texture.width,this.h=this.texture.height,this.x=0,this.y=0};e.default=n},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e,n,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"infinite",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;i(this,t),this.lnImage=n,this.game=e,this.changeNames(s),this.frameIndex=0,this.frameCount=a,this.nowCount=a,this.iteration=o,this.cb=r}return n(t,[{key:"update",value:function(){if(this.nowCount--,0==this.nowCount&&0!==this.iteration&&(this.nowCount=this.frameCount,this.frameIndex=(this.frameIndex+1)%this.frames.length,this.lnImage.image=this.frames[this.frameIndex],this.frameIndex==this.frames.length-1))switch(this.iteration){case"infinite":break;case 1:this.iteration=0,this.cb&&this.cb();break;default:this.iteration--}}},{key:"changeNames",value:function(t){var e=this;this.frameCount=5,this.frames=t.map(function(t){return e.game.images[t]})}}]),t}();e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(5),r=(n(o),function(){function t(e,i,n,a,o,r){s(this,t),this.lnImage=e,this.stayImgs=i,this.stayToLeftImgs=n,this.leftImgs=a,this.stayToRightImgs=o,this.rightImgs=r,this.infinieFrame=3,this.quickFrame=1,this.frameCount=this.infinieFrame,this.nowCount=this.quickFrame,this.frameIndex=0,this.frames=this.stayImgs,this.stage="stay",this.iteration="infinite",this.nextFun=null,console.log(this)}return a(t,[{key:"update",value:function(){this.nextFun&&(this.nextFun(),this.nextFun=null),this.nowCount--,0===this.nowCount&&(this.nowCount=this.frameCount,this.doAnime())}},{key:"doAnime",value:function(){if(this.frameIndex++,0!==this.iteration)if(this.frameIndex<this.frames.length)this.lnImage.name=this.frames[this.frameIndex];else switch(this.iteration){default:this.iteration--;case"infinite":this.frameIndex=0,this.lnImage.name=this.frames[this.frameIndex];break;case 1:this.end()}}},{key:"moveLeft",value:function(){var t=this;"stayToLeft"!==this.stage&&"left"!==this.stage&&(this.stage="stayToLeft",this.nextFun=function(){t.configAnime(t.stayToLeftImgs,1,t.quickFrame)})}},{key:"moveRight",value:function(){var t=this;"stayToRight"!==this.stage&&"right"!==this.stage&&(this.stage="stayToRight",this.nextFun=function(){t.configAnime(t.stayToRightImgs,1,t.quickFrame)})}},{key:"end",value:function(){var t=this;switch(this.stage){case"stayToLeft":this.stage="left",this.nextFun=function(){t.configAnime(t.leftImgs)};break;case"stayToRight":this.stage="right",this.nextFun=function(){t.configAnime(t.rightImgs)};break;case"leftToStay":case"rightToStay":this.stage="stay",this.nextFun=function(){t.configAnime(t.stayImgs)}}}},{key:"stay",value:function(){var t=this;switch(this.stage){case"left":this.stage="leftToStay",this.nextFun=function(){t.configAnime(t.stayToLeftImgs.slice().reverse(),1,t.quickFrame)};break;case"stayToLeft":this.stage="leftToStay",this.nextFun=function(){t.configAnime(t.stayToLeftImgs.slice(t.frameIndex).reverse(),1,t.quickFrame)};break;case"right":this.stage="rightToStay",this.nextFun=function(){t.configAnime(t.stayToRightImgs.slice().reverse(),1,t.quickFrame)};break;case"stayToRight":this.stage="rightToStay",this.nextFun=function(){t.configAnime(t.stayToRightImgs.slice(t.frameIndex).reverse(),1,t.quickFrame)}}}},{key:"configAnime",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"infinite",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.infinieFrame;this.frames=t,this.iteration=e,this.frameCount=i,this.frameIndex=-1}}]),t}());e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={width:400,height:600}}]);
//# sourceMappingURL=game.js.map