!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="/public/",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=n(1),r=i(o),a=n(2),s=i(a),u=n(3),c=i(u),l=n(4),h=i(l);game=c.default.instance(60,s.default,function(e){var t=new h.default(e);e.runWithScene(t)}),(0,r.default)(game,!0),console.log(game)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t&&(window.addEventListener("keydown",function(t){27===t.keyCode?MOD.paused=!0:13===t.keyCode?MOD.paused=!1:88===t.keyCode&&e.scene.clear()}),$("esc").addEventListener("click",function(e){e.preventDefault(),MOD.paused=!0}),$("enter").addEventListener("click",function(e){e.preventDefault(),MOD.paused=!1}),$("clear").addEventListener("click",function(t){t.preventDefault(),e.scene.clear()}))}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={pl00:"img/player/pl00.png",pl01:"img/player/pl01.png",enemy:"img/enemy/enemy.png",pl00b:"img/player/pl00b.png"}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i,o){var r=this;n(this,e),window.fps=t,this.images=i,this.textures={},this.runCallback=o,this.deadCount=0,this.t=0,this.scene=null,this.actions={},this.endActions={},this.startActions={},this.keydowns={},this.canvas=document.querySelector("#id-canvas"),this.context=this.canvas.getContext("2d"),window.addEventListener("keydown",function(e){r.keydowns[e.keyCode]=!0,r.startActions[e.keyCode]&&r.startActions[e.keyCode].allow&&(r.startActions[e.keyCode].cb(),r.startActions[e.keyCode].allow=!1)}),window.addEventListener("keyup",function(e){r.keydowns[e.keyCode]=!1,r.endActions[e.keyCode]&&(r.endActions[e.keyCode](),r.startActions[e.keyCode]&&(r.startActions[e.keyCode].allow=!0))}),this.init()}return i(e,[{key:"registerAction",value:function(e,t,n,i){t&&(this.actions[e]=t),n&&(this.startActions[e]={cb:n,allow:!0}),i&&(this.endActions[e]=i)}},{key:"__start",value:function(){this.runCallback(this)}},{key:"runWithScene",value:function(e){var t=this;this.scene=e,setTimeout(function(){t.runloop()},1e3/window.fps)}},{key:"runloop",value:function(){for(var e=this,t=Object.keys(this.actions),n=0;n<t.length;n++){var i=t[n];this.keydowns[i]&&this.actions[i]()}this.update(),this.context.clearRect(0,0,this.canvas.width,this.canvas.heithisht),this.draw(),setTimeout(function(){e.runloop()},1e3/window.fps)}},{key:"update",value:function(){this.t++,this.scene.update()}},{key:"draw",value:function(){this.scene.draw()}},{key:"dead",value:function(){this.deadCount++,$("deadCount").innerHTML=this.deadCount,MOD.paused=!0}},{key:"init",value:function(){for(var e=this,t=0,n=Object.keys(e.images),i=function(){var i=n[o];r=e.images[i];var a=new Image;a.src=r,a.onload=function(){e.textures[i]=a,t++,t==n.length&&(console.log("load images",e.images),e.__start())}},o=0;o<n.length;o++){var r;i()}}}],[{key:"instance",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.i=this.i||new(Function.prototype.bind.apply(this,[null].concat(t))),this.i}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(5),s=i(a),u=n(12),c=i(u),l=n(11),h=i(l),f=n(8),y=(i(f),n(13)),p=(i(y),n(15)),d=(i(p),n(19)),m=i(d),v=function(){function e(t){o(this,e),this.game=t,this.game.scene=this,this.eles=[],this.appendRate=0,this.player=new s.default(this.game),this.addEle(this.player),this.registerPlayerAction(),this.addEle(new h.default(this.game))}return r(e,[{key:"registerPlayerAction",value:function(){var e=this;this.game.registerAction("37",function(){return e.player.onDirection("l")},null,function(){return e.player.offDirection("l")}),this.game.registerAction("39",function(){return e.player.onDirection("r")},null,function(){return e.player.offDirection("r")}),this.game.registerAction("38",function(){return e.player.onDirection("t")},null,function(){return e.player.offDirection("t")}),this.game.registerAction("40",function(){return e.player.onDirection("b")},null,function(){return e.player.offDirection("b")}),this.game.registerAction("90",function(){return e.player.tryShot()})}},{key:"addEle",value:function(e){this.eles.push(e)}},{key:"removeEle",value:function(e){this.eles.splice(this.eles.indexOf(e),1),e=null}},{key:"drawEles",value:function(){var e=this;this.eles.forEach(function(t){t.isReverse?t.drawReverse():t.draw(e.game),t.drawHPRound&&t.drawHPRound()})}},{key:"drawPlayerPoint",value:function(){this.player.drawPoint()}},{key:"modPlayer",value:function(e){if("pl00"==e){if("pl00"==this.player.player)return;this.removeEle(this.player),this.player=new s.default(this.game),this.addEle(this.player),this.registerPlayerAction()}else{if("pl01"==this.player.player)return;this.removeEle(this.player),this.player=new c.default(this.game),this.addEle(this.player),this.registerPlayerAction()}}},{key:"modSpeed",value:function(e){this.player.speed=e}},{key:"modInfinieFrame",value:function(e){this.player.anime.infinieFrame=e}},{key:"modQuickFrame",value:function(e){this.player.anime.quickFrame=e}},{key:"clear",value:function(){this.eles.forEach(function(e){"bullet"===e.type&&(e.destroy=!0)})}},{key:"draw",value:function(){this.game.context.fillStyle="#554",this.game.context.fillRect(0,0,CONFIG.width,CONFIG.height),this.drawEles(),this.drawPlayerPoint()}},{key:"doFlow",value:function(e,t){var n=t.toString();e[n]&&e[n](this.game)}},{key:"update",value:function(){var e=this;MOD.paused||(this.doFlow(m.default,this.game.t),this.eles.forEach(function(t){t.anime&&t.anime.update(),t.update&&t.update(e.game),t.collide&&(console.log("collide",t.x,t.y),e.game.dead(),t.destroy=!0),t.destroy&&e.removeEle(t)}))}},{key:"randomShot",value:function(){for(this.appendRate+=MOD.appendRate;this.appendRate>60;)this.addBP(),this.appendRate-=60}},{key:"addBP",value:function(){var e=new LinearPoint(Utils.randomInt(0,CONFIG.width),0,MOD.bulletRadius,MOD.bulletSpeed,Utils.randomInt(30,150));this.addEle(e)}}]),e}();t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(6),c=i(u),l=n(11),h=i(l),f=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"pl00"));return n.shotFrameCount=4,n.shotCount=1,n}return a(t,e),s(t,[{key:"tryShot",value:function(){this.shotCount--,this.shotCount<=0&&(this.shot(),this.shotCount=this.shotFrameCount)}},{key:"shot",value:function(){var e=new h.default(this.game,this.x-8,this.y-16),t=new h.default(this.game,this.x+8,this.y-16);this.game.scene.addEle(e),this.game.scene.addEle(t)}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(7),c=(i(u),n(8)),l=i(c),h=n(9),f=(i(h),n(10)),y=i(f),p=function(e){function t(e,n){o(this,t);var i=[{name:"01",x:0,y:0},{name:"02",x:32,y:0},{name:"03",x:64,y:0},{name:"04",x:96,y:0},{name:"05",x:128,y:0},{name:"06",x:160,y:0},{name:"07",x:192,y:0},{name:"08",x:224,y:0},{name:"09",x:0,y:48},{name:"10",x:32,y:48},{name:"11",x:64,y:48},{name:"12",x:96,y:48},{name:"13",x:128,y:48},{name:"14",x:160,y:48},{name:"15",x:192,y:48},{name:"16",x:224,y:48},{name:"17",x:0,y:96},{name:"18",x:32,y:96},{name:"19",x:64,y:96},{name:"20",x:96,y:96},{name:"21",x:128,y:96},{name:"22",x:160,y:96},{name:"23",x:192,y:96},{name:"24",x:224,y:96}],a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,32,48,i));return a.x=200,a.y=500,a.speed=4,a.player="player",a.pointRadius=2,a.l=!1,a.r=!1,a.t=!1,a.b=!1,a.lf=null,a.tb=null,a.anime=new y.default(a,["01","02","03","04","05","06","07","08"],["09","10","11","12"],["13","14","15","16"],["17","18","19","20"],["21","22","23","24"]),a}return a(t,e),s(t,[{key:"move",value:function(e){switch(e){case"l":this.moveLeft();break;case"r":this.moveRight();break;case"t":this.moveTop();break;case"b":this.moveBottom()}}},{key:"moveLeft",value:function(){this.anime.moveLeft(),this.x>this.speed+this.w/2?this.x-=this.speed:this.x=this.w/2}},{key:"moveRight",value:function(){this.anime.moveRight(),this.x<CONFIG.width-this.w/2-this.speed?this.x+=this.speed:this.x=CONFIG.width-this.w/2}},{key:"moveTop",value:function(){this.y>this.speed+this.h/2?this.y-=this.speed:this.y=this.h/2}},{key:"moveBottom",value:function(){this.y<CONFIG.height-this.h/2-this.speed?this.y+=this.speed:this.y=CONFIG.height-this.h/2}},{key:"stay",value:function(){this.anime.stay()}},{key:"onDirection",value:function(e){switch(e){case"l":!this.l&&this.r&&(this.lr="l"),this.l=!0;break;case"r":!this.r&&this.l&&(this.lr="r"),this.r=!0;break;case"t":!this.t&&this.b&&(this.tb="t"),this.t=!0;break;case"b":!this.b&&this.t&&(this.tb="b"),this.b=!0}}},{key:"offDirection",value:function(e){switch(e){case"l":this.l=!1,this.lr=null;break;case"r":this.r=!1,this.lr=null;break;case"t":this.t=!1,this.tb=null;break;case"b":this.b=!1,this.tb=null}}},{key:"update",value:function(){this.lr?this.move(this.lr):this.l?this.move("l"):this.r?this.move("r"):this.stay(),this.tb?this.move(this.tb):this.t?this.move("t"):this.b&&this.move("b")}},{key:"drawPoint",value:function(){var e=this.game.context;e.beginPath(),e.fillStyle="#fff",e.arc(this.x,this.y,this.pointRadius,0,2*Math.PI),e.fill(),e.beginPath(),e.strokeStyle="blue",e.arc(this.x,this.y,this.pointRadius+1,0,2*Math.PI),e.stroke()}}]),t}(l.default);t.default=p},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i){n(this,e),this.game=t,this.name=i,this.texture=t.textures[i],this.w=this.texture.width,this.h=this.texture.height,this.x=0,this.y=0,this.isReverse=!1}return i(e,[{key:"draw",value:function(){var e=this.game.textures[this.name];this.game.context.drawImage(e,this.x-this.w/2,this.y-this.h/2)}},{key:"drawReverse",value:function(){var e=this.game.textures[this.name],t=this.game.context;t.save(),t.transform(-1,0,0,1,0,0),t.drawImage(e,-this.w/2-this.x,this.y-this.h/2,this.w,this.h),t.restore()}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(7),c=i(u),l=function(e){function t(e,n,i,a,s){o(this,t);var u=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return u.w=i,u.h=a,u.data={},s.forEach(function(e){u.data[e.name]={x:e.x,y:e.y}}),u.isReverse=!1,u.sprite={x:s[0].x,y:s[0].y},u}return a(t,e),s(t,[{key:"draw",value:function(){var e=this.game.textures[this.name];this.game.context.drawImage(e,this.sprite.x,this.sprite.y,this.w,this.h,this.x-this.w/2,this.y-this.h/2,this.w,this.h)}},{key:"toggleSprite",value:function(e){this.data[e]?this.sprite=this.data[e]:error("name not found",e,this.data)}},{key:"drawReverse",value:function(){var e=this.game.textures[this.name],t=this.game.context;t.save(),t.transform(-1,0,0,1,0,0),t.drawImage(e,this.sprite.x,this.sprite.y,this.w,this.h,-this.w/2-this.x,this.y-this.h/2,this.w,this.h),t.restore()}}]),t}(c.default);t.default=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i){n(this,e),this.lnImage=t,this.stayImgs=i,this.infinieFrame=6,this.quickFrame=1,this.frameCount=this.infinieFrame,this.nowCount=this.quickFrame,this.frameIndex=0,this.frames=this.stayImgs,this.iteration="infinite",this.nextFun=null}return i(e,[{key:"update",value:function(){this.nextFun&&(this.nextFun(),this.nextFun=null),this.nowCount--,0===this.nowCount&&(this.nowCount=this.frameCount,this.doAnime())}},{key:"doAnime",value:function(){if(this.frameIndex++,0!==this.iteration)if(this.frameIndex<this.frames.length)this.changeImg(this.frameIndex);else switch(this.iteration){default:this.iteration--;case"infinite":this.frameIndex=0,this.changeImg(this.frameIndex);break;case 1:this.end()}}},{key:"changeImg",value:function(e){var t=this.frames[e];this.lnImage.toggleSprite(t)}},{key:"end",value:function(){}},{key:"configAnime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"infinite",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.infinieFrame;this.frames=e,this.iteration=t,this.frameCount=n,this.frameIndex=-1}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(9),c=i(u),l=function(e){function t(e,n,i,a,s,u){o(this,t);var c=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return c.stayToLeftImgs=i,c.leftImgs=a,c.stayToRightImgs=s,c.rightImgs=u,c.stage="stay",c}return a(t,e),s(t,[{key:"changeImg",value:function(e){var t=this.frames[e];this.lnImage.toggleSprite(t)}},{key:"moveLeft",value:function(){var e=this;"stayToLeft"!==this.stage&&"left"!==this.stage&&(this.stage="stayToLeft",this.nextFun=function(){e.configAnime(e.stayToLeftImgs,1,e.quickFrame)})}},{key:"moveRight",value:function(){var e=this;"stayToRight"!==this.stage&&"right"!==this.stage&&(this.stage="stayToRight",this.nextFun=function(){e.configAnime(e.stayToRightImgs,1,e.quickFrame)})}},{key:"end",value:function(){var e=this;switch(this.stage){case"stayToLeft":this.stage="left",this.nextFun=function(){e.configAnime(e.leftImgs)};break;case"stayToRight":this.stage="right",this.nextFun=function(){e.configAnime(e.rightImgs)};break;case"leftToStay":case"rightToStay":this.stage="stay",this.nextFun=function(){e.configAnime(e.stayImgs)}}}},{key:"stay",value:function(){var e=this;switch(this.stage){case"left":this.stage="leftToStay",this.nextFun=function(){e.configAnime(e.stayToLeftImgs.slice().reverse(),1,e.quickFrame)};break;case"stayToLeft":this.stage="leftToStay",this.nextFun=function(){e.configAnime(e.stayToLeftImgs.slice(e.frameIndex).reverse(),1,e.quickFrame)};break;case"right":this.stage="rightToStay",this.nextFun=function(){e.configAnime(e.stayToRightImgs.slice().reverse(),1,e.quickFrame)};break;case"stayToRight":this.stage="rightToStay",this.nextFun=function(){e.configAnime(e.stayToRightImgs.slice(e.frameIndex).reverse(),1,e.quickFrame)}}}}]),t}(c.default);t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(7),c=i(u),l=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400;o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"pl00b"));return a.x=n,a.y=i,a.destroy=!1,a}return a(t,e),s(t,[{key:"update",value:function(e){this.y-=16,this.computeLeave(),this.computeCollide(e.scene.eles)}},{key:"computeLeave",value:function(){this.y<0&&(this.destroy=!0)}},{key:"computeCollide",value:function(e){var t=this;e.forEach(function(e){if("enemy"===e.type){var n=t.collideRect(e.x-e.side,t.x,2*e.side,t.w,t.y,e.y-e.side,t.h,2*e.side);n&&(t.destroy=!0,e.beShot(10))}})}},{key:"collideRect",value:function(e,t,n,i,o,r,a,s){return!(e>=t&&e>=t+i)&&(!(e<=t&&e+n<=t)&&(!(o>=r&&o>=r+s)&&!(o<=r&&o+a<=r)))}}]),t}(c.default);t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),u=i(s),c=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"pl01"))}return a(t,e),t}(u.default);t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(14),c=i(u),l=function(e){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:90,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;o(this,t);var c=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));return c.speed=a,c.angle=s,c.rad=Math.PI/180*s,c.speedT=u,c}return a(t,e),s(t,[{key:"move",value:function(){this.t>this.speedT?(this.y+=this.speed*Math.sin(this.rad),this.x+=this.speed*Math.cos(this.rad)):(this.y+=this.speed*Math.sin(this.rad)*3,this.x+=this.speed*Math.cos(this.rad)*3)}}]),t}(c.default);t.default=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;n(this,e),this.x=t,this.y=i,this.radius=o,this.fillStyle="#fff",this.strokeStyle="red",this.type="bullet",this.destroy=!1,this.collide=!1,this.t=0}return i(e,[{key:"draw",value:function(e){var t=e.context;t.beginPath(),t.fillStyle=this.fillStyle,t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fill(),t.beginPath(),t.strokeStyle=this.strokeStyle,t.arc(this.x,this.y,this.radius+1,0,2*Math.PI),t.stroke()}},{key:"update",value:function(e){this.t++,this.move(),this.computeLeave(),this.computeCollide(e.scene.player)}},{key:"computeLeave",value:function(){(this.y<-this.radius||this.x<-this.radius||this.y>CONFIG.height+this.radius||this.x>CONFIG.width+this.radius)&&(this.destroy=!0)}},{key:"computeCollide",value:function(e){var t=e.x-this.x,n=e.y-this.y,i=Math.sqrt(t*t+n*n),o=e.pointRadius+this.radius;this.collide=i<o}},{key:"move",value:function(){}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(16),c=i(u),l=n(17),h=i(l),f=n(18),y=i(f),p=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o(this,t);var i=[{name:"01",x:0,y:32*n+320},{name:"02",x:32,y:32*n+320},{name:"03",x:64,y:32*n+320},{name:"04",x:96,y:32*n+320},{name:"05",x:128,y:32*n+320},{name:"06",x:160,y:32*n+320},{name:"07",x:192,y:32*n+320},{name:"08",x:224,y:32*n+320},{name:"09",x:256,y:32*n+320},{name:"10",x:288,y:32*n+320},{name:"11",x:320,y:32*n+320},{name:"12",x:352,y:32*n+320}],a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,32,32,i));return a.hp=80,a.pointRadius=2,a.side=16,a.anime=new c.default(a,["01","02","03","04","05"],["06","07","08"],["09","10","11","12"]),a}return a(t,e),s(t,[{key:"shot",value:function(){var e=this.game.scene.player,t=new h.default(this.x,this.y+16,e.x,e.y,6,1.5);this.game.scene.addEle(t)}}]),t}(y.default);t.default=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(9),c=i(u),l=function(e){function t(e,n,i,a){o(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s.stayToMoveImgs=i,s.moveImgs=a,s.stage="stay",s}return a(t,e),s(t,[{key:"move",value:function(){var e=this;"stayToMove"!==this.stage&&"move"!==this.stage&&(this.stage="stayToMove",this.nextFun=function(){e.configAnime(e.stayToMoveImgs,1,e.quickFrame)})}},{key:"end",value:function(){var e=this;switch(this.stage){case"stayToMove":this.stage="move",this.nextFun=function(){e.configAnime(e.moveImgs)};break;case"moveToStay":this.stage="stay",this.nextFun=function(){e.configAnime(e.stayImgs)}}}},{key:"stay",value:function(){var e=this;switch(this.stage){case"move":this.stage="moveToStay",this.nextFun=function(){e.configAnime(e.stayToMoveImgs.slice().reverse(),1,e.quickFrame)};break;case"stayToMove":this.stage="moveToStay",this.nextFun=function(){e.configAnime(e.stayToMoveImgs.slice(e.frameIndex).reverse(),1,e.quickFrame)}}}}]),t}(c.default);t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(14),c=i(u),l=function(e){function t(e,n,i,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;o(this,t);var c=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,s)),l=Math.sqrt((a-n)*(a-n)+(i-e)*(i-e));return c.ty=(a-n)/l*u,c.tx=(i-e)/l*u,c}return a(t,e),s(t,[{key:"move",value:function(){this.y+=this.ty,this.x+=this.tx}}]),t}(c.default);t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(7),c=(i(u),n(8)),l=i(c),h=n(16),f=i(h),y=n(17),p=(i(y),function(e){function t(e,n,i,a){o(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"enemy",n,i,a));return s.type="enemy",s.x=0,s.y=0,s.hp=80,s.collide=!1,s.pointRadius=2,s.side=16,s.t=0,s.destroy=!1,s.startComputerLeave=120,s.anime=new f.default(s,["01","02","03","04","05"],["06","07","08"],["09","10","11","12"]),s}return a(t,e),s(t,[{key:"toRight",value:function(){this.isReverse=!1}},{key:"toLeft",value:function(){this.isReverse=!0}},{key:"update",value:function(e){this.updateBoss&&this.updateBoss(),this.move(e.scene.player),this.t>this.startComputerLeave&&this.computeLeave(),this.computeCollide(e.scene.player)}},{key:"move",value:function(e){this.t++;var t=this.path.call(this,this.t);t.x&&(this.x=t.x),t.y&&(this.y=t.y)}},{key:"path",value:function(e){}},{key:"shot",value:function(){}},{key:"computeLeave",value:function(){(this.y<-this.side||this.x<-this.side||this.y>CONFIG.height+this.side||this.x>CONFIG.width+this.side)&&(this.destroy=!0,console.log("destroy"))}},{key:"computeCollide",value:function(e){var t=e.x-this.x,n=e.y-this.y,i=Math.sqrt(t*t+n*n),o=e.pointRadius+this.pointRadius;this.collide=i<o}},{key:"beShot",value:function(e){this.hp-=e,this.hp<=0&&(this.destroy=!0);
}}]),t}(l.default));t.default=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=new u.default(e,n);i.anime.move(),i.path=function(e){var n=120;return e%20==0&&e>0&&e<150&&30==t&&i.shot(),e<n?{x:300*h((e/2-90)*p)+300+t,y:300*y((e/2-90)*p)-t/2}:(i.anime.stay(),{x:300*h((n/2-90)*p)+300+t+(e-n),y:300*y((n/2-90)*p)-t/2+(e-n)/3})},e.scene.addEle(i)}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=new u.default(e,n);i.toLeft(),i.anime.move(),i.path=function(e){var n=120;return e%20==0&&e>0&&e<150&&30==t&&i.shot(),e<n?{x:400-(300*h((e/2-90)*p)+300+t),y:300*y((e/2-90)*p)-t/2}:(i.anime.stay(),{x:400-(300*h((n/2-90)*p)+300+t+(e-n)),y:300*y((n/2-90)*p)-t/2+(e-n)/3})},e.scene.addEle(i)}function a(e){var t=new l.default(e);t.path=function(e){return e>=60&1==t.stage&&t.shot_round(9*(e-60)),3==t.stage&&e%6==0&&t.shot_round2(e-500),5==t.stage&&e%2==0&&t.shot_round3(e),e%120==0&&e>60&&t.shot_pbp(),e<30?{x:200,y:200/30*e}:2==t.stage?{x:260-t.stageTime,y:200}:3==t.stage?{x:260,y:200}:4==t.stage?{x:200+t.stageTime,y:200}:{x:200,y:200}},log(t),e.scene.addEle(t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(15),u=i(s),c=n(20),l=i(c),h=Math.sin,f=Math.PI,y=Math.cos,p=(Math.tan,f/180);t.default={20:function(e){o(e),o(e,30,1),o(e,60)},80:function(e){o(e),o(e,30,1),o(e,60)},140:function(e){o(e),o(e,30,1),o(e,60)},200:function(e){o(e),o(e,30,1),o(e,60)},260:function(e){o(e),o(e,30,1),o(e,60)},320:function(e){o(e),o(e,30,1),o(e,60)},380:function(e){o(e),o(e,30,1),o(e,60)},440:function(e){o(e),o(e,30,1),o(e,60)},540:function(e){r(e),r(e,30,1),r(e,60)},600:function(e){r(e),r(e,30,1),r(e,60)},660:function(e){r(e),r(e,30,1),r(e,60)},720:function(e){r(e),r(e,30,1),r(e,60)},780:function(e){r(e),r(e,30,1),r(e,60)},840:function(e){r(e),r(e,30,1),r(e,60)},900:function(e){r(e),r(e,30,1),r(e,60)},960:function(e){r(e),r(e,30,1),r(e,60)},1300:function(e){a(e)}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(16),c=i(u),l=n(13),h=i(l),f=n(17),y=i(f),p=n(18),d=i(p),m=function(e){function t(e){o(this,t);var n=[{name:"01",x:0,y:448},{name:"02",x:64,y:448},{name:"03",x:128,y:448},{name:"04",x:192,y:448},{name:"05",x:256,y:448},{name:"06",x:320,y:448},{name:"07",x:384,y:448},{name:"08",x:448,y:448},{name:"09",x:320,y:384},{name:"10",x:384,y:448},{name:"11",x:320,y:384},{name:"12",x:384,y:448}],i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,64,64,n));return i.maxHp=i.hp=1e4,i.pointRadius=4,i.side=32,i.stage=1,i.stageTime=0,i.anime=new c.default(i,["01","02","03","04"],["05","06","07","08"],["09","10","11","12"]),i}return a(t,e),s(t,[{key:"drawHPRound",value:function(){var e=this.game.context;e.beginPath(),e.strokeStyle="red",e.arc(this.x,this.y,47,0,2*Math.PI),e.stroke(),e.beginPath(),e.strokeStyle="red",e.arc(this.x,this.y,51,0,2*Math.PI),e.stroke();var t=this.hp/this.maxHp;e.beginPath(),e.fillStyle="#fff",e.arc(this.x,this.y,48,2*Math.PI*t,0,!0),e.arc(this.x,this.y,50,0,2*Math.PI*t),e.fill()}},{key:"shot_round",value:function(e){var t=new h.default(this.x,this.y,3,1.5,e,20);this.game.scene.addEle(t)}},{key:"shot_round2",value:function(e){for(var t=0;t<6;t++){var n=new h.default(this.x,this.y,4,3,60*t+e);this.game.scene.addEle(n)}}},{key:"shot_round3",value:function(e){for(var t=0;t<4;t++){var n=new h.default(this.x,this.y,16,1.5,120*t+e);this.game.scene.addEle(n)}}},{key:"shot_pbp",value:function(){var e=this.game.scene.player,t=new y.default(this.x,this.y+16,e.x,e.y,6,2);this.game.scene.addEle(t)}},{key:"updateBoss",value:function(){switch(this.stage){case 0:break;case 1:this.hp<6666&&(this.stage=2,this.stageTime=60,this.game.scene.clear());break;case 2:this.stageTime--,this.stageTime<=0&&(this.stage=3);break;case 3:this.hp<3333&&(this.stage=4,this.stageTime=60,this.game.scene.clear());break;case 4:this.stageTime--,this.stageTime<=0&&(this.stage=5)}}},{key:"beShot",value:function(e){this.hp-=e,this.hp<=0&&(this.game.scene.clear(),this.destroy=!0)}}]),t}(d.default);t.default=m}]);
//# sourceMappingURL=game.js.map